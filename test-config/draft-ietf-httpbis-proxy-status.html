<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The Proxy-Status HTTP Header Field</title><script>
function anchorRewrite() {
  map = { };
  if (window.location.hash.length >= 1) {
    var fragid = window.location.hash.substr(1);
    if (fragid) {
      if (! document.getElementById(fragid)) {
        var prefix = "rfc.";
        var mapped = map[fragid];
        if (mapped) {
          window.location.hash = mapped;
        } else if (fragid.indexOf("section-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(8);
        } else if (fragid.indexOf("appendix-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(9);
        } else if (fragid.indexOf("s-") == 0) {
          var postfix = fragid.substring(2);
          if (postfix.startsWith("abstract")) {
            window.location.hash = prefix + postfix;
          } else if (postfix.startsWith("note-")) {
            window.location.hash = prefix + "note." + postfix.substring(5);
          } else {
            window.location.hash = prefix + "section." + postfix;
          }
        } else if (fragid.indexOf("p-") == 0) {
          var r = fragid.substring(2);
          var p = r.indexOf("-");
          if (p >= 0) {
            window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
          }
        }
      }
    }  
  }
}
window.addEventListener('hashchange', anchorRewrite);
window.addEventListener('DOMContentLoaded', anchorRewrite);
</script>
<style type="text/css">/*<![CDATA[*/

body {
  font: 16px "Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 624px;
  padding: 0 5px;
}

.title, .filename, h1, h2, h3, h4, h5 {
  font: 16px "Roboto Condensed","Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  font-size-adjust: 0.5;
  font-weight: bold;
  color: #333;
  line-height: 100%;
  margin: 1.2em 0 0.3em;
}
.title, #rfc\.title h1 { font-size: 32px; }
h1, section h1, h2, section h2, section h3, nav h2 { font-size: 20px; }
h3, section h4, h4, section h5 { font-size: 16px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header, table#rfc\.headerblock {
  width: 100%;
}
table.header td, table#rfc\.headerblock td {
  border: none;
  background-color: transparent;
  color: black;
  padding: 0;
}
.filename {
  display: block;
  color: rgb(119, 119, 119);
  font-size: 20px;
  font-weight: normal;
  line-height: 100%;
  margin: 10px 0 32px;
}
#rfc\.abstract+p, #rfc\.abstract+p code, #rfc\.abstract+p samp, #rfc\.abstract+p tt {
  font-size: 20px;
  line-height: 28px;
}

samp, tt, code, pre, span.tt {
  font-size: 13.5px;
  font-family: Consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure, caption {
  font-style: italic;
  margin: 0 1.5em;
  text-align: left;
}

address {
  margin: 16px 2px;
  line-height: 20px;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn, address b {
  font-weight: normal;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

p, ol, ul, li {
  padding: 0;
}
p {
  margin: 0.5em 0;
}
ol, ul {
  margin: 0.2em 0 0.2em 2em;
}
li {
  margin: 0.2em 0;
}
address {
  font-style: normal;
}

ul.toc ul {
  margin: 0 0 0 2em;
}
ul.toc li {
  list-style: none;
  margin: 0;
}

@media screen and (min-width: 924px) {
  body {
    padding-right: 350px;
  }
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    z-index: 1;
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>#rfc\.toc {
    top: 55px;
  }
  body>ul.toc {
    top: 100px;
  }

  ul.toc {
    margin: 0 0 0 4px;
    font-size: 12px;
    line-height: 20px;
  }
  ul.toc ul {
    margin-left: 1.2em;
  }
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>
  <meta name="viewport" content="initial-scale=1.0">
<link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="License" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 The Proxy-Status HTTP Header Field" href="#rfc.section.2"><link rel="Chapter" title="3 Proxy Status Types" href="#rfc.section.3"><link rel="Chapter" title="4 Defining New Proxy Status Types" href="#rfc.section.4"><link rel="Chapter" title="5 IANA Considerations" href="#rfc.section.5"><link rel="Chapter" title="6 Security Considerations" href="#rfc.section.6"><link rel="Chapter" title="7 References" href="#rfc.section.7"><meta name="viewport" content="initial-scale=1"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.1213, 2019/10/24 07:19:34, XSLT vendor: libxslt http://xmlsoft.org/XSLT/, via: https://github.com/cabo/kramdown-rfc2629 version 1.2.12"><meta name="keywords" content="Internet-Draft"><link rel="schema.dcterms" href="http://purl.org/dc/terms/"><meta name="dcterms.creator" content="Nottingham, M."><meta name="dcterms.creator" content="Sikora, P."><meta name="dcterms.issued" content="2019-10-30"><meta name="dcterms.abstract" content="This document defines the Proxy-Status HTTP header field to convey the details of errors generated by HTTP intermediaries."><meta name="description" content="This document defines the Proxy-Status HTTP header field to convey the details of errors generated by HTTP intermediaries."></head><body><header><table class="header" id="rfc.headerblock"><tbody><tr><td class="left">HTTP Working Group</td><td class="right">M. Nottingham</td></tr><tr><td class="left">Internet-Draft</td><td class="right">Fastly</td></tr><tr><td class="left">Intended status: Standards Track</td><td class="right">P. Sikora</td></tr><tr><td class="left">Expires: May 2, 2020</td><td class="right">Google</td></tr><tr><td class="left"></td><td class="right">October 30, 2019</td></tr></tbody></table><div id="rfc.title"><h1>The Proxy-Status HTTP Header Field</h1><div class="filename"><a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-proxy-status" class="smpl">draft-ietf-httpbis-proxy-status-latest</a></div></div></header><section><h2 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h2><div id="rfc.abstract.p.1"><p>This document defines the Proxy-Status HTTP header field to convey the details of errors generated by HTTP intermediaries.</p></div></section><section class="note"><h2 id="rfc.note.1"><a href="#rfc.note.1">Note to Readers</a></h2><div id="rfc.note.1.p.1"><p><em>RFC EDITOR: please remove this section before publication</em></p></div><div id="rfc.note.1.p.2"><p>Discussion of this draft takes place on the HTTP working group mailing list (ietf-http-wg@w3.org), which is archived at <a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">https://lists.w3.org/Archives/Public/ietf-http-wg/</a>.</p></div><div id="rfc.note.1.p.3"><p>Working Group information can be found at <a href="https://httpwg.org/">https://httpwg.org/</a>; source code and issues list for this draft can be found at <a href="https://github.com/httpwg/http-extensions/labels/proxy-status">https://github.com/httpwg/http-extensions/labels/proxy-status</a>.</p></div></section><section id="rfc.status"><h2><a href="#rfc.status">Status of this Memo</a></h2><div id="rfc.boilerplate.1.p.1"><p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p></div><div id="rfc.boilerplate.1.p.2"><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p></div><div id="rfc.boilerplate.1.p.3"><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work in progress”.</p></div><div id="rfc.boilerplate.1.p.4"><p>This Internet-Draft will expire on May 2, 2020.</p></div></section><section id="rfc.copyrightnotice"><h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2><div id="rfc.boilerplate.2.p.1"><p>Copyright © 2019 IETF Trust and the persons identified as the document authors. All rights reserved.</p></div><div id="rfc.boilerplate.2.p.2"><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p></div></section><hr class="noprint"><nav id="rfc.toc"><h2 class="np"><a href="#rfc.toc">Table of Contents</a></h2><ul class="toc"><li><a href="#rfc.section.1">1.</a>   <a href="#introduction">Introduction</a><ul><li><a href="#rfc.section.1.1">1.1.</a>   <a href="#notational-conventions">Notational Conventions</a></li></ul></li><li><a href="#rfc.section.2">2.</a>   <a href="#header">The Proxy-Status HTTP Header Field</a><ul><li><a href="#rfc.section.2.1">2.1.</a>   <a href="#params">Generic Proxy Status Parameters</a></li></ul></li><li><a href="#rfc.section.3">3.</a>   <a href="#types">Proxy Status Types</a><ul><li><a href="#rfc.section.3.1">3.1.</a>   <a href="#dns-timeout">DNS Timeout</a></li><li><a href="#rfc.section.3.2">3.2.</a>   <a href="#dns-error">DNS Error</a></li><li><a href="#rfc.section.3.3">3.3.</a>   <a href="#destination-not-found">Destination Not Found</a></li><li><a href="#rfc.section.3.4">3.4.</a>   <a href="#destination-unavailable">Destination Unavailable</a></li><li><a href="#rfc.section.3.5">3.5.</a>   <a href="#destination-ip-prohibited">Destination IP Prohibited</a></li><li><a href="#rfc.section.3.6">3.6.</a>   <a href="#destination-ip-unroutable">Destination IP Unroutable</a></li><li><a href="#rfc.section.3.7">3.7.</a>   <a href="#connection-refused">Connection Refused</a></li><li><a href="#rfc.section.3.8">3.8.</a>   <a href="#connection-terminated">Connection Terminated</a></li><li><a href="#rfc.section.3.9">3.9.</a>   <a href="#connection-timeout">Connection Timeout</a></li><li><a href="#rfc.section.3.10">3.10.</a>   <a href="#connection-read-timeout">Connection Read Timeout</a></li><li><a href="#rfc.section.3.11">3.11.</a>   <a href="#connection-write-timeout">Connection Write Timeout</a></li><li><a href="#rfc.section.3.12">3.12.</a>   <a href="#connection-limit-reached">Connection Limit Reached</a></li><li><a href="#rfc.section.3.13">3.13.</a>   <a href="#http-response-status">HTTP Response Status</a></li><li><a href="#rfc.section.3.14">3.14.</a>   <a href="#http-incomplete-response">HTTP Incomplete Response</a></li><li><a href="#rfc.section.3.15">3.15.</a>   <a href="#http-protocol-error">HTTP Protocol Error</a></li><li><a href="#rfc.section.3.16">3.16.</a>   <a href="#http-response-header-block-too-large">HTTP Response Header Block Too Large</a></li><li><a href="#rfc.section.3.17">3.17.</a>   <a href="#http-response-header-too-large">HTTP Response Header Too Large</a></li><li><a href="#rfc.section.3.18">3.18.</a>   <a href="#http-response-body-too-large">HTTP Response Body Too Large</a></li><li><a href="#rfc.section.3.19">3.19.</a>   <a href="#http-response-transfer-coding-error">HTTP Response Transfer-Coding Error</a></li><li><a href="#rfc.section.3.20">3.20.</a>   <a href="#http-response-content-coding-error">HTTP Response Content-Coding Error</a></li><li><a href="#rfc.section.3.21">3.21.</a>   <a href="#http-response-timeout">HTTP Response Timeout</a></li><li><a href="#rfc.section.3.22">3.22.</a>   <a href="#tls-handshake-error">TLS Handshake Error</a></li><li><a href="#rfc.section.3.23">3.23.</a>   <a href="#tls-untrusted-peer-certificate">TLS Untrusted Peer Certificate</a></li><li><a href="#rfc.section.3.24">3.24.</a>   <a href="#tls-expired-peer-certificate">TLS Expired Peer Certificate</a></li><li><a href="#rfc.section.3.25">3.25.</a>   <a href="#tls-unexpected-peer-certificate">TLS Unexpected Peer Certificate</a></li><li><a href="#rfc.section.3.26">3.26.</a>   <a href="#tls-missing-proxy-certificate">TLS Missing Proxy Certificate</a></li><li><a href="#rfc.section.3.27">3.27.</a>   <a href="#tls-rejected-proxy-certificate">TLS Rejected Proxy Certificate</a></li><li><a href="#rfc.section.3.28">3.28.</a>   <a href="#tls-error">TLS Error</a></li><li><a href="#rfc.section.3.29">3.29.</a>   <a href="#http-request-bad-request">HTTP Request Bad Request</a></li><li><a href="#rfc.section.3.30">3.30.</a>   <a href="#http-request-unauthorized">HTTP Request Unauthorized</a></li><li><a href="#rfc.section.3.31">3.31.</a>   <a href="#http-request-forbidden">HTTP Request Forbidden</a></li><li><a href="#rfc.section.3.32">3.32.</a>   <a href="#http-request-not-found">HTTP Request Not Found</a></li><li><a href="#rfc.section.3.33">3.33.</a>   <a href="#http-request-method-not-allowed">HTTP Request Method Not Allowed</a></li><li><a href="#rfc.section.3.34">3.34.</a>   <a href="#http-request-not-acceptable">HTTP Request Not Acceptable</a></li><li><a href="#rfc.section.3.35">3.35.</a>   <a href="#http-request-proxy-authentication-required">HTTP Request Proxy Authentication Required</a></li><li><a href="#rfc.section.3.36">3.36.</a>   <a href="#http-request-timeout">HTTP Request Timeout</a></li><li><a href="#rfc.section.3.37">3.37.</a>   <a href="#http-request-conflict">HTTP Request Conflict</a></li><li><a href="#rfc.section.3.38">3.38.</a>   <a href="#http-request-timeout-1">HTTP Request Timeout</a></li><li><a href="#rfc.section.3.39">3.39.</a>   <a href="#http-request-length-required">HTTP Request Length Required</a></li><li><a href="#rfc.section.3.40">3.40.</a>   <a href="#http-request-precondition-failed">HTTP Request Precondition Failed</a></li><li><a href="#rfc.section.3.41">3.41.</a>   <a href="#http-request-payload-too-large">HTTP Request Payload Too Large</a></li><li><a href="#rfc.section.3.42">3.42.</a>   <a href="#http-request-uri-too-long">HTTP Request URI Too Long</a></li><li><a href="#rfc.section.3.43">3.43.</a>   <a href="#http-request-unsupported-media-type">HTTP Request Unsupported Media Type</a></li><li><a href="#rfc.section.3.44">3.44.</a>   <a href="#http-request-range-not-satisfiable">HTTP Request Range Not Satisfiable</a></li><li><a href="#rfc.section.3.45">3.45.</a>   <a href="#http-request-expectation-failed">HTTP Request Expectation Failed</a></li><li><a href="#rfc.section.3.46">3.46.</a>   <a href="#http-request-misdirected-request">HTTP Request Misdirected Request</a></li><li><a href="#rfc.section.3.47">3.47.</a>   <a href="#http-request-unprocessable-entity">HTTP Request Unprocessable Entity</a></li><li><a href="#rfc.section.3.48">3.48.</a>   <a href="#http-request-locked">HTTP Request Locked</a></li><li><a href="#rfc.section.3.49">3.49.</a>   <a href="#http-request-failed-dependency">HTTP Request Failed Dependency</a></li><li><a href="#rfc.section.3.50">3.50.</a>   <a href="#http-request-too-early">HTTP Request Too Early</a></li><li><a href="#rfc.section.3.51">3.51.</a>   <a href="#http-request-upgrade-required">HTTP Request Upgrade Required</a></li><li><a href="#rfc.section.3.52">3.52.</a>   <a href="#http-request-precondition-required">HTTP Request Precondition Required</a></li><li><a href="#rfc.section.3.53">3.53.</a>   <a href="#http-request-too-many-requests">HTTP Request Too Many Requests</a></li><li><a href="#rfc.section.3.54">3.54.</a>   <a href="#http-request-header-fields-too-large">HTTP Request Header Fields Too Large</a></li><li><a href="#rfc.section.3.55">3.55.</a>   <a href="#http-request-unavailable-for-legal-reasons">HTTP Request Unavailable For Legal Reasons</a></li><li><a href="#rfc.section.3.56">3.56.</a>   <a href="#http-request-denied">HTTP Request Denied</a></li><li><a href="#rfc.section.3.57">3.57.</a>   <a href="#http-upgrade-failed">HTTP Upgrade Failed</a></li><li><a href="#rfc.section.3.58">3.58.</a>   <a href="#proxy-internal-response">Proxy Internal Response</a></li><li><a href="#rfc.section.3.59">3.59.</a>   <a href="#proxy-internal-error">Proxy Internal Error</a></li><li><a href="#rfc.section.3.60">3.60.</a>   <a href="#proxy-loop-detected">Proxy Loop Detected</a></li></ul></li><li><a href="#rfc.section.4">4.</a>   <a href="#register">Defining New Proxy Status Types</a></li><li><a href="#rfc.section.5">5.</a>   <a href="#iana-considerations">IANA Considerations</a></li><li><a href="#rfc.section.6">6.</a>   <a href="#security">Security Considerations</a></li><li><a href="#rfc.section.7">7.</a>   <a href="#rfc.references">References</a><ul><li><a href="#rfc.section.7.1">7.1.</a>   <a href="#rfc.references.1">Normative References</a></li><li><a href="#rfc.section.7.2">7.2.</a>   <a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.authors">Authors' Addresses</a></li></ul></nav><hr class="noprint"><section id="introduction"><h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a> <a href="#introduction">Introduction</a></h2><div id="rfc.section.1.p.1"><p>HTTP intermediaries – including both forward proxies and gateways (also known as “reverse proxies”) – have become an increasingly significant part of HTTP deployments. In particular, reverse proxies and Content Delivery Networks (CDNs) form part of the critical infrastructure of many Web sites.</p></div><div id="rfc.section.1.p.2"><p>Typically, HTTP intermediaries forward requests towards the origin server and then forward their responses back to clients. However, if an error occurs, the response is generated by the intermediary itself.</p></div><div id="rfc.section.1.p.3"><p>HTTP accommodates these types of errors with a few status codes; for example, 502 Bad Gateway and 504 Gateway Timeout. However, experience has shown that more information is necessary to aid debugging and communicate what’s happened to the client.</p></div><div id="rfc.section.1.p.4"><p>To address this, <a href="#header" title="The Proxy-Status HTTP Header Field">Section 2</a> defines a new HTTP response header field to convey such information, using the Proxy Status Types defined in <a href="#types" title="Proxy Status Types">Section 3</a>. <a href="#register" title="Defining New Proxy Status Types">Section 4</a> explains how to define new Proxy Status Types.</p></div><section id="notational-conventions"><h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a> <a href="#notational-conventions">Notational Conventions</a></h3><div id="rfc.section.1.1.p.1"><p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in BCP 14 <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a> <a href="#RFC8174"><cite title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a> when, and only when, they appear in all capitals, as shown here.</p></div><div id="rfc.section.1.1.p.2"><p>This specification uses Structured Headers <a href="#I-D.ietf-httpbis-header-structure"><cite title="Structured Headers for HTTP">[I-D.ietf-httpbis-header-structure]</cite></a> to specify syntax. The terms sh-param-list, sh-item, sh-string, sh-token and sh-integer refer to the structured types defined therein.</p></div><div id="rfc.section.1.1.p.3"><p>Note that in this specification, “proxy” is used to indicate both forward and reverse proxies, otherwise known as gateways. “Next hop” indicates the connection in the direction leading to the origin server for the request.</p></div></section></section><hr class="noprint"><section id="header"><h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a> <a href="#header">The Proxy-Status HTTP Header Field</a></h2><div id="rfc.section.2.p.1"><p>The Proxy-Status HTTP response header field allows an intermediary to indicate the nature and details of an error condition it encounters when servicing a request.</p></div><div id="rfc.section.2.p.2"><p>It is a Structured Headers <a href="#I-D.ietf-httpbis-header-structure"><cite title="Structured Headers for HTTP">[I-D.ietf-httpbis-header-structure]</cite></a> Parameterised List, where each item in the list indicates an error condition. Typically, it will have only one param-item (the error condition that triggered generation of the response it occurs within), but more than one value is not prohibited.</p></div><div id="rfc.section.2.p.3"><p>Each param-item’s primary-id is a Proxy Status Type, a registered value that indicates the nature of the error.</p></div><div id="rfc.section.2.p.4"><p>Each param-item can have zero to many parameters. <a href="#params" title="Generic Proxy Status Parameters">Section 2.1</a> lists parameters that can be used with all Proxy Status Types; individual types can define additional parameters to use with them. All parameters are optional; see <a href="#security" title="Security Considerations">Section 6</a> for their potential security impact.</p></div><div id="rfc.section.2.p.5" class="avoidbreakafter"><p>For example:</p></div><div id="rfc.figure.u.1"><div><pre class="text">

HTTP/1.1 504 Gateway Timeout

Proxy-Status: connection_timeout; proxy=SomeCDN; origin=abc; tries=3

</pre></div></div><div id="rfc.section.2.p.6"><p>indicates the specific nature of the timeout as a connect timeout to the origin with the identifier “abc”, and that is was generated by the intermediary that identifies itself as “SomeCDN.” Furthermore, three connection attempts were made.</p></div><div id="rfc.section.2.p.7" class="avoidbreakafter"><p>Or:</p></div><div id="rfc.figure.u.2"><div><pre class="text">

HTTP/1.1 429 Too Many Requests

Proxy-Status: http_request_error; proxy=SomeReverseProxy

</pre></div></div><div id="rfc.section.2.p.8"><p>indicates that this 429 Too Many Requests response was generated by the intermediary, not the origin.</p></div><div id="rfc.section.2.p.9"><p>Each Proxy Status Type has a Recommended HTTP Status Code. When generating a HTTP response containing Proxy-Status, its HTTP status code SHOULD be set to the Recommended HTTP Status Code. However, there may be circumstances (e.g., for backwards compatibility with previous behaviours) when another status code might be used.</p></div><div id="rfc.section.2.p.10"><p><a href="#types" title="Proxy Status Types">Section 3</a> lists the Proxy Status Types defined in this document; new ones can be defined using the procedure outlined in <a href="#register" title="Defining New Proxy Status Types">Section 4</a>.</p></div><div id="rfc.section.2.p.11"><p>Proxy-Status MAY be sent in HTTP trailers, but – as with all trailers – it might be silently discarded along the path to the user agent, this SHOULD NOT be done unless it is not possible to send it in headers. For example, if an intermediary is streaming a response and the upstream connection suddenly terminates, Proxy-Status can be appended to the trailers of the outgoing message (since the headers have already been sent).</p></div><div id="rfc.section.2.p.12"><p>Note that there are various security considerations for intermediaries using the Proxy-Status header field; see <a href="#security" title="Security Considerations">Section 6</a>.</p></div><div id="rfc.section.2.p.13"><p>Origin servers MUST NOT generate the Proxy-Status header field.</p></div><section id="params"><h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a> <a href="#params">Generic Proxy Status Parameters</a></h3><div id="rfc.section.2.1.p.1"><p>This section lists parameters that are potentially applicable to most Proxy Status Types.</p></div><div id="rfc.section.2.1.p.2"><ul><li>node - a sh-string identifying the intermediary generating this Proxy Status Type. MAY be a hostname, IP address, or alias.</li><li>origin - a sh-string identifying the origin server whose behaviour triggered this response. MAY be a hostname, IP address, or alias.</li><li>protocol - a sh-token indicating the ALPN protocol identifier <a href="#RFC7301"><cite title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a> used to connect to the next hop. This is only applicable when that connection was actually established.</li><li>tries - a sh-integer indicating the number of times that the indicated error occurred when attempting to satisfy the request.</li><li>details - a sh-string containing additional information not captured anywhere else. This can include implementation-specific or deployment-specific information.</li></ul></div></section></section><hr class="noprint"><section id="types"><h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a> <a href="#types">Proxy Status Types</a></h2><div id="rfc.section.3.p.1"><p>This section lists the Proxy Status Types defined by this document. See <a href="#register" title="Defining New Proxy Status Types">Section 4</a> for information about defining new Proxy Status Types.</p></div><section id="dns-timeout"><h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#dns-timeout">DNS Timeout</a></h3><div id="rfc.section.3.1.p.1"><ul><li>Name: dns_timeout</li><li>Description: The intermediary encountered a timeout when trying to find an IP address for the destination hostname.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 504</li></ul></div></section><section id="dns-error"><h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a> <a href="#dns-error">DNS Error</a></h3><div id="rfc.section.3.2.p.1"><ul><li>Name: dns_error</li><li>Description: The intermediary encountered a DNS error when trying to find an IP address for the destination hostname.</li><li>Extra Parameters: <ul><li>rcode: A sh-string conveying the DNS RCODE that indicates the error type. See <a href="#RFC8499"><cite title="DNS Terminology">[RFC8499]</cite></a>, Section 3.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="destination-not-found"><h3 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a> <a href="#destination-not-found">Destination Not Found</a></h3><div id="rfc.section.3.3.p.1"><ul><li>Name: destination_not_found</li><li>Description: The intermediary cannot determine the appropriate next hop to use for this request; for example, it may not be configured. Note that this error is specific to gateways, which typically require specific configuration to identify the “backend” server; forward proxies use in-band information to identify the origin server.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 500</li></ul></div></section><section id="destination-unavailable"><h3 id="rfc.section.3.4"><a href="#rfc.section.3.4">3.4.</a> <a href="#destination-unavailable">Destination Unavailable</a></h3><div id="rfc.section.3.4.p.1"><ul><li>Name: destination_unavailable</li><li>Description: The intermediary considers the next hop to be unavailable; e.g., recent attempts to communicate with it may have failed, or a health check may indicate that it is down.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 503</li></ul></div></section><section id="destination-ip-prohibited"><h3 id="rfc.section.3.5"><a href="#rfc.section.3.5">3.5.</a> <a href="#destination-ip-prohibited">Destination IP Prohibited</a></h3><div id="rfc.section.3.5.p.1"><ul><li>Name: destination_ip_prohibited</li><li>Description: The intermediary is configured to prohibit connections to the destination IP address.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="destination-ip-unroutable"><h3 id="rfc.section.3.6"><a href="#rfc.section.3.6">3.6.</a> <a href="#destination-ip-unroutable">Destination IP Unroutable</a></h3><div id="rfc.section.3.6.p.1"><ul><li>Name: destination_ip_unroutable</li><li>Description: The intermediary cannot find a route to the next hop IP address.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="connection-refused"><h3 id="rfc.section.3.7"><a href="#rfc.section.3.7">3.7.</a> <a href="#connection-refused">Connection Refused</a></h3><div id="rfc.section.3.7.p.1"><ul><li>Name: connection_refused</li><li>Description: The intermediary’s connection to the next hop was refused.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="connection-terminated"><h3 id="rfc.section.3.8"><a href="#rfc.section.3.8">3.8.</a> <a href="#connection-terminated">Connection Terminated</a></h3><div id="rfc.section.3.8.p.1"><ul><li>Name: connection_terminated</li><li>Description: The intermediary’s connection to the next hop was closed before any part of the response was received. If some part was received, see http_response_incomplete.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="connection-timeout"><h3 id="rfc.section.3.9"><a href="#rfc.section.3.9">3.9.</a> <a href="#connection-timeout">Connection Timeout</a></h3><div id="rfc.section.3.9.p.1"><ul><li>Name: connection_timeout</li><li>Description: The intermediary’s attempt to open a connection to the next hop timed out.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 504</li></ul></div></section><section id="connection-read-timeout"><h3 id="rfc.section.3.10"><a href="#rfc.section.3.10">3.10.</a> <a href="#connection-read-timeout">Connection Read Timeout</a></h3><div id="rfc.section.3.10.p.1"><ul><li>Name: connection_read_timeout</li><li>Description: The intermediary was expecting data on a connection (e.g., part of a response), but did not receive any new data in a configured time limit.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 504</li></ul></div></section><section id="connection-write-timeout"><h3 id="rfc.section.3.11"><a href="#rfc.section.3.11">3.11.</a> <a href="#connection-write-timeout">Connection Write Timeout</a></h3><div id="rfc.section.3.11.p.1"><ul><li>Name: connection_write_timeout</li><li>Description: The intermediary was attempting to write data to a connection, but was not able to (e.g., because its buffers were full).</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 504</li></ul></div></section><section id="connection-limit-reached"><h3 id="rfc.section.3.12"><a href="#rfc.section.3.12">3.12.</a> <a href="#connection-limit-reached">Connection Limit Reached</a></h3><div id="rfc.section.3.12.p.1"><ul><li>Name: connnection_limit_reached</li><li>Description: The intermediary is configured to limit the number of connections it has to the next hop, and that limit has been passed.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 503</li></ul></div></section><section id="http-response-status"><h3 id="rfc.section.3.13"><a href="#rfc.section.3.13">3.13.</a> <a href="#http-response-status">HTTP Response Status</a></h3><div id="rfc.section.3.13.p.1" class="avoidbreakafter"><ul><li>Name: http_response_status</li><li>Description: The intermediary has received a response from the next hop and forwarded it to the client.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code:</li></ul></div></section><section id="http-incomplete-response"><h3 id="rfc.section.3.14"><a href="#rfc.section.3.14">3.14.</a> <a href="#http-incomplete-response">HTTP Incomplete Response</a></h3><div id="rfc.section.3.14.p.1"><ul><li>Name: http_response_incomplete</li><li>Description: The intermediary received an incomplete response to the request from the next hop.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-protocol-error"><h3 id="rfc.section.3.15"><a href="#rfc.section.3.15">3.15.</a> <a href="#http-protocol-error">HTTP Protocol Error</a></h3><div id="rfc.section.3.15.p.1"><ul><li>Name: http_protocol_error</li><li>Description: The intermediary encountered a HTTP protocol error when communicating with the next hop. This error should only be used when a more specific one is not defined.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-header-block-too-large"><h3 id="rfc.section.3.16"><a href="#rfc.section.3.16">3.16.</a> <a href="#http-response-header-block-too-large">HTTP Response Header Block Too Large</a></h3><div id="rfc.section.3.16.p.1"><ul><li>Name: http_response_header_block_size</li><li>Description: The intermediary received a response to the request whose header block was considered too large.</li><li>Extra Parameters: <ul><li>header_block_size: a sh-integer indicating how large the headers received were. Note that they might not be complete; i.e., the intermediary may have discarded or refused additional data.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-header-too-large"><h3 id="rfc.section.3.17"><a href="#rfc.section.3.17">3.17.</a> <a href="#http-response-header-too-large">HTTP Response Header Too Large</a></h3><div id="rfc.section.3.17.p.1"><ul><li>Name: http_response_header_size</li><li>Description: The intermediary received a response to the request containing an individual header line that was considered too large.</li><li>Extra Parameters: <ul><li>header_name: a sh-string indicating the name of the header that triggered the error.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-body-too-large"><h3 id="rfc.section.3.18"><a href="#rfc.section.3.18">3.18.</a> <a href="#http-response-body-too-large">HTTP Response Body Too Large</a></h3><div id="rfc.section.3.18.p.1"><ul><li>Name: http_response_body_size</li><li>Description: The intermediary received a response to the request whose body was considered too large.</li><li>Extra Parameters: <ul><li>body_size: a sh-integer indicating how large the body received was. Note that it may not have been complete; i.e., the intermediary may have discarded or refused additional data.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-transfer-coding-error"><h3 id="rfc.section.3.19"><a href="#rfc.section.3.19">3.19.</a> <a href="#http-response-transfer-coding-error">HTTP Response Transfer-Coding Error</a></h3><div id="rfc.section.3.19.p.1"><ul><li>Name: http_response_transfer_coding</li><li>Description: The intermediary encountered an error decoding the transfer-coding of the response.</li><li>Extra Parameters: <ul><li>coding: a sh-token containing the specific coding that caused the error.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-content-coding-error"><h3 id="rfc.section.3.20"><a href="#rfc.section.3.20">3.20.</a> <a href="#http-response-content-coding-error">HTTP Response Content-Coding Error</a></h3><div id="rfc.section.3.20.p.1"><ul><li>Name: http_response_content_coding</li><li>Description: The intermediary encountered an error decoding the content-coding of the response.</li><li>Extra Parameters: <ul><li>coding: a sh-token containing the specific coding that caused the error.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-response-timeout"><h3 id="rfc.section.3.21"><a href="#rfc.section.3.21">3.21.</a> <a href="#http-response-timeout">HTTP Response Timeout</a></h3><div id="rfc.section.3.21.p.1"><ul><li>Name: http_response_timeout</li><li>Description: The intermediary reached a configured time limit waiting for the complete response.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 504</li></ul></div></section><section id="tls-handshake-error"><h3 id="rfc.section.3.22"><a href="#rfc.section.3.22">3.22.</a> <a href="#tls-handshake-error">TLS Handshake Error</a></h3><div id="rfc.section.3.22.p.1"><ul><li>Name: tls_handshake_error</li><li>Description: The intermediary encountered an error during TLS handshake with the next hop.</li><li>Extra Parameters: <ul><li>alert_message: a sh-token containing the applicable description string from the TLS Alerts registry.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="tls-untrusted-peer-certificate"><h3 id="rfc.section.3.23"><a href="#rfc.section.3.23">3.23.</a> <a href="#tls-untrusted-peer-certificate">TLS Untrusted Peer Certificate</a></h3><div id="rfc.section.3.23.p.1"><ul><li>Name: tls_untrusted_peer_certificate</li><li>Description: The intermediary received untrusted peer certificate during TLS handshake with the next hop.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="tls-expired-peer-certificate"><h3 id="rfc.section.3.24"><a href="#rfc.section.3.24">3.24.</a> <a href="#tls-expired-peer-certificate">TLS Expired Peer Certificate</a></h3><div id="rfc.section.3.24.p.1"><ul><li>Name: tls_expired_peer_certificate</li><li>Description: The intermediary received expired peer certificate during TLS handshake with the next hop.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="tls-unexpected-peer-certificate"><h3 id="rfc.section.3.25"><a href="#rfc.section.3.25">3.25.</a> <a href="#tls-unexpected-peer-certificate">TLS Unexpected Peer Certificate</a></h3><div id="rfc.section.3.25.p.1"><ul><li>Name: tls_unexpected_peer_certificate</li><li>Description: The intermediary received unexpected peer certificate (e.g., SPKI doesn’t match) during TLS handshake with the next hop.</li><li>Extra Parameters: <ul><li>identity: a sh-string containing a comma-separated list of Subject Alternative Names from the certificate received from the next hop.</li><li>sha256: a sh-string containing the hex-encoded SHA-256 of the certificate received from the next hop.</li><li>spki: a sh-string containing the base64-encoded SHA-256 of the Subject Public Key Info (SPKI) from the certificate received from the next hop.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="tls-missing-proxy-certificate"><h3 id="rfc.section.3.26"><a href="#rfc.section.3.26">3.26.</a> <a href="#tls-missing-proxy-certificate">TLS Missing Proxy Certificate</a></h3><div id="rfc.section.3.26.p.1"><ul><li>Name: tls_missing_proxy_certificate</li><li>Description: The next hop requested client certificate from the intermediary during TLS handshake, but it wasn’t configured with one.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 500</li></ul></div></section><section id="tls-rejected-proxy-certificate"><h3 id="rfc.section.3.27"><a href="#rfc.section.3.27">3.27.</a> <a href="#tls-rejected-proxy-certificate">TLS Rejected Proxy Certificate</a></h3><div id="rfc.section.3.27.p.1"><ul><li>Name: tls_rejected_proxy_certificate</li><li>Description: The next hop rejected client certificate provided by the intermediary during TLS handshake.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 500</li></ul></div></section><section id="tls-error"><h3 id="rfc.section.3.28"><a href="#rfc.section.3.28">3.28.</a> <a href="#tls-error">TLS Error</a></h3><div id="rfc.section.3.28.p.1"><ul><li>Name: tls_error</li><li>Description: The intermediary encountered a TLS error when communicating with the next hop.</li><li>Extra Parameters: <ul><li>alert_message: a sh-token containing the applicable description string from the TLS Alerts registry.</li></ul></li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="http-request-bad-request"><h3 id="rfc.section.3.29"><a href="#rfc.section.3.29">3.29.</a> <a href="#http-request-bad-request">HTTP Request Bad Request</a></h3><div id="rfc.section.3.29.p.1"><ul><li>Name: http_request_bad_request</li><li>Description: The intermediary is generating a 400 (Bad Request) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 400</li></ul></div></section><section id="http-request-unauthorized"><h3 id="rfc.section.3.30"><a href="#rfc.section.3.30">3.30.</a> <a href="#http-request-unauthorized">HTTP Request Unauthorized</a></h3><div id="rfc.section.3.30.p.1"><ul><li>Name: http_request_unauthorized</li><li>Description: The intermediary is generating a 401 (Unauthorized) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 401</li></ul></div></section><section id="http-request-forbidden"><h3 id="rfc.section.3.31"><a href="#rfc.section.3.31">3.31.</a> <a href="#http-request-forbidden">HTTP Request Forbidden</a></h3><div id="rfc.section.3.31.p.1"><ul><li>Name: http_request_forbidden</li><li>Description: The intermediary is generating a 403 (Forbidden) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 403</li></ul></div></section><section id="http-request-not-found"><h3 id="rfc.section.3.32"><a href="#rfc.section.3.32">3.32.</a> <a href="#http-request-not-found">HTTP Request Not Found</a></h3><div id="rfc.section.3.32.p.1"><ul><li>Name: http_request_not_found</li><li>Description: The intermediary is generating a 404 (Not Found) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 404</li></ul></div></section><section id="http-request-method-not-allowed"><h3 id="rfc.section.3.33"><a href="#rfc.section.3.33">3.33.</a> <a href="#http-request-method-not-allowed">HTTP Request Method Not Allowed</a></h3><div id="rfc.section.3.33.p.1"><ul><li>Name: http_request_method_not_allowed</li><li>Description: The intermediary is generating a 405 (Method Not Allowed) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 405</li></ul></div></section><section id="http-request-not-acceptable"><h3 id="rfc.section.3.34"><a href="#rfc.section.3.34">3.34.</a> <a href="#http-request-not-acceptable">HTTP Request Not Acceptable</a></h3><div id="rfc.section.3.34.p.1"><ul><li>Name: http_request_not_acceptable</li><li>Description: The intermediary is generating a 406 (Not Acceptable) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 406</li></ul></div></section><section id="http-request-proxy-authentication-required"><h3 id="rfc.section.3.35"><a href="#rfc.section.3.35">3.35.</a> <a href="#http-request-proxy-authentication-required">HTTP Request Proxy Authentication Required</a></h3><div id="rfc.section.3.35.p.1"><ul><li>Name: http_request_proxy_authentication_required</li><li>Description: The intermediary is generating a 407 (Proxy Authentication Required) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 407</li></ul></div></section><section id="http-request-timeout"><h3 id="rfc.section.3.36"><a href="#rfc.section.3.36">3.36.</a> <a href="#http-request-timeout">HTTP Request Timeout</a></h3><div id="rfc.section.3.36.p.1"><ul><li>Name: http_request_timeout</li><li>Description: The intermediary is generating a 408 (Request Timeout) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 408</li></ul></div></section><section id="http-request-conflict"><h3 id="rfc.section.3.37"><a href="#rfc.section.3.37">3.37.</a> <a href="#http-request-conflict">HTTP Request Conflict</a></h3><div id="rfc.section.3.37.p.1"><ul><li>Name: http_request_conflict</li><li>Description: The intermediary is generating a 408 (Conflict) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 409</li></ul></div></section><section id="http-request-timeout-1"><h3 id="rfc.section.3.38"><a href="#rfc.section.3.38">3.38.</a> <a href="#http-request-timeout-1">HTTP Request Timeout</a></h3><div id="rfc.section.3.38.p.1"><ul><li>Name: http_request_gone</li><li>Description: The intermediary is generating a 410 (Gone) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 410</li></ul></div></section><section id="http-request-length-required"><h3 id="rfc.section.3.39"><a href="#rfc.section.3.39">3.39.</a> <a href="#http-request-length-required">HTTP Request Length Required</a></h3><div id="rfc.section.3.39.p.1"><ul><li>Name: http_request_length_required</li><li>Description: The intermediary is generating a 411 (Length Required) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 411</li></ul></div></section><section id="http-request-precondition-failed"><h3 id="rfc.section.3.40"><a href="#rfc.section.3.40">3.40.</a> <a href="#http-request-precondition-failed">HTTP Request Precondition Failed</a></h3><div id="rfc.section.3.40.p.1"><ul><li>Name: http_request_precondition_failed</li><li>Description: The intermediary is generating a 412 (Precondition Failed) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 412</li></ul></div></section><section id="http-request-payload-too-large"><h3 id="rfc.section.3.41"><a href="#rfc.section.3.41">3.41.</a> <a href="#http-request-payload-too-large">HTTP Request Payload Too Large</a></h3><div id="rfc.section.3.41.p.1"><ul><li>Name: http_request_payload_too_large</li><li>Description: The intermediary is generating a 413 (Payload Too Large) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 413</li></ul></div></section><section id="http-request-uri-too-long"><h3 id="rfc.section.3.42"><a href="#rfc.section.3.42">3.42.</a> <a href="#http-request-uri-too-long">HTTP Request URI Too Long</a></h3><div id="rfc.section.3.42.p.1"><ul><li>Name: http_request_uri_too_long</li><li>Description: The intermediary is generating a 414 (URI Too Long) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 414</li></ul></div></section><section id="http-request-unsupported-media-type"><h3 id="rfc.section.3.43"><a href="#rfc.section.3.43">3.43.</a> <a href="#http-request-unsupported-media-type">HTTP Request Unsupported Media Type</a></h3><div id="rfc.section.3.43.p.1"><ul><li>Name: http_request_unsupported_media_type</li><li>Description: The intermediary is generating a 415 (Unsupported Media Type) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 415</li></ul></div></section><section id="http-request-range-not-satisfiable"><h3 id="rfc.section.3.44"><a href="#rfc.section.3.44">3.44.</a> <a href="#http-request-range-not-satisfiable">HTTP Request Range Not Satisfiable</a></h3><div id="rfc.section.3.44.p.1"><ul><li>Name: http_request_range_not_satisfiable</li><li>Description: The intermediary is generating a 416 (Range Not Satisfiable) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 416</li></ul></div></section><section id="http-request-expectation-failed"><h3 id="rfc.section.3.45"><a href="#rfc.section.3.45">3.45.</a> <a href="#http-request-expectation-failed">HTTP Request Expectation Failed</a></h3><div id="rfc.section.3.45.p.1"><ul><li>Name: http_request_expectation_failed</li><li>Description: The intermediary is generating a 417 (Expectation Failed) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 417</li></ul></div></section><section id="http-request-misdirected-request"><h3 id="rfc.section.3.46"><a href="#rfc.section.3.46">3.46.</a> <a href="#http-request-misdirected-request">HTTP Request Misdirected Request</a></h3><div id="rfc.section.3.46.p.1"><ul><li>Name: http_request_misdirected_request</li><li>Description: The intermediary is generating a 421 (Misdirected Request) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 421</li></ul></div></section><section id="http-request-unprocessable-entity"><h3 id="rfc.section.3.47"><a href="#rfc.section.3.47">3.47.</a> <a href="#http-request-unprocessable-entity">HTTP Request Unprocessable Entity</a></h3><div id="rfc.section.3.47.p.1"><ul><li>Name: http_request_unprocessable_entity</li><li>Description: The intermediary is generating a 422 (Unprocessable Entity) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 422</li></ul></div></section><section id="http-request-locked"><h3 id="rfc.section.3.48"><a href="#rfc.section.3.48">3.48.</a> <a href="#http-request-locked">HTTP Request Locked</a></h3><div id="rfc.section.3.48.p.1"><ul><li>Name: http_request_locked</li><li>Description: The intermediary is generating a 423 (Locked) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 423</li></ul></div></section><section id="http-request-failed-dependency"><h3 id="rfc.section.3.49"><a href="#rfc.section.3.49">3.49.</a> <a href="#http-request-failed-dependency">HTTP Request Failed Dependency</a></h3><div id="rfc.section.3.49.p.1"><ul><li>Name: http_request_failed_dependency</li><li>Description: The intermediary is generating a 424 (Failed Dependency) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 424</li></ul></div></section><section id="http-request-too-early"><h3 id="rfc.section.3.50"><a href="#rfc.section.3.50">3.50.</a> <a href="#http-request-too-early">HTTP Request Too Early</a></h3><div id="rfc.section.3.50.p.1"><ul><li>Name: http_request_too_early</li><li>Description: The intermediary is generating a 425 (Too Early) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 425</li></ul></div></section><section id="http-request-upgrade-required"><h3 id="rfc.section.3.51"><a href="#rfc.section.3.51">3.51.</a> <a href="#http-request-upgrade-required">HTTP Request Upgrade Required</a></h3><div id="rfc.section.3.51.p.1"><ul><li>Name: http_request_upgrade_required</li><li>Description: The intermediary is generating a 426 (Upgrade Required) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 426</li></ul></div></section><section id="http-request-precondition-required"><h3 id="rfc.section.3.52"><a href="#rfc.section.3.52">3.52.</a> <a href="#http-request-precondition-required">HTTP Request Precondition Required</a></h3><div id="rfc.section.3.52.p.1"><ul><li>Name: http_request_precondition_required</li><li>Description: The intermediary is generating a 428 (Precondition Required) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 428</li></ul></div></section><section id="http-request-too-many-requests"><h3 id="rfc.section.3.53"><a href="#rfc.section.3.53">3.53.</a> <a href="#http-request-too-many-requests">HTTP Request Too Many Requests</a></h3><div id="rfc.section.3.53.p.1"><ul><li>Name: http_request_too_many_requests</li><li>Description: The intermediary is generating a 429 (Too Many Requests) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 429</li></ul></div></section><section id="http-request-header-fields-too-large"><h3 id="rfc.section.3.54"><a href="#rfc.section.3.54">3.54.</a> <a href="#http-request-header-fields-too-large">HTTP Request Header Fields Too Large</a></h3><div id="rfc.section.3.54.p.1"><ul><li>Name: http_request_header_fields_too_large</li><li>Description: The intermediary is generating a 431 (Request Header Fields Too Large) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 431</li></ul></div></section><section id="http-request-unavailable-for-legal-reasons"><h3 id="rfc.section.3.55"><a href="#rfc.section.3.55">3.55.</a> <a href="#http-request-unavailable-for-legal-reasons">HTTP Request Unavailable For Legal Reasons</a></h3><div id="rfc.section.3.55.p.1"><ul><li>Name: http_request_unavailable_for_legal_reasons</li><li>Description: The intermediary is generating a 451 (Unavailable For Legal Reasons) response on the origin’s behalf. This proxy status type helps distinguish between responses generated by intermediaries from those generated by the origin.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 451</li></ul></div></section><section id="http-request-denied"><h3 id="rfc.section.3.56"><a href="#rfc.section.3.56">3.56.</a> <a href="#http-request-denied">HTTP Request Denied</a></h3><div id="rfc.section.3.56.p.1"><ul><li>Name: http_request_denied</li><li>Description: The intermediary rejected HTTP request based on its configuration and/or policy settings. The request wasn’t forwarded to the next hop.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 400</li></ul></div></section><section id="http-upgrade-failed"><h3 id="rfc.section.3.57"><a href="#rfc.section.3.57">3.57.</a> <a href="#http-upgrade-failed">HTTP Upgrade Failed</a></h3><div id="rfc.section.3.57.p.1"><ul><li>Name: http_upgrade_failed</li><li>Description: The HTTP Upgrade between the intermediary and the next hop failed.</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section><section id="proxy-internal-response"><h3 id="rfc.section.3.58"><a href="#rfc.section.3.58">3.58.</a> <a href="#proxy-internal-response">Proxy Internal Response</a></h3><div id="rfc.section.3.58.p.1" class="avoidbreakafter"><ul><li>Name: proxy_internal_response</li><li>Description: The intermediary generated the response locally, without attempting to connect to the next hop (e.g. in response to a request to a debug endpoint terminated at the intermediary).</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code:</li></ul></div></section><section id="proxy-internal-error"><h3 id="rfc.section.3.59"><a href="#rfc.section.3.59">3.59.</a> <a href="#proxy-internal-error">Proxy Internal Error</a></h3><div id="rfc.section.3.59.p.1"><ul><li>Name: proxy_internal_error</li><li>Description: The intermediary encountered an internal error unrelated to the origin.</li><li>Extra Parameters: <ul><li>error: a sh-string containing details about the error condition.</li></ul></li><li>Recommended HTTP status code: 500</li></ul></div></section><section id="proxy-loop-detected"><h3 id="rfc.section.3.60"><a href="#rfc.section.3.60">3.60.</a> <a href="#proxy-loop-detected">Proxy Loop Detected</a></h3><div id="rfc.section.3.60.p.1"><ul><li>Name: proxy_loop_detected</li><li>Description: The intermediary tried to forward the request to itself, or a loop has been detected using different means (e.g. <a href="#RFC8586"><cite title="Loop Detection in Content Delivery Networks (CDNs)">[RFC8586]</cite></a>).</li><li>Extra Parameters: None.</li><li>Recommended HTTP status code: 502</li></ul></div></section></section><hr class="noprint"><section id="register"><h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a> <a href="#register">Defining New Proxy Status Types</a></h2><div id="rfc.section.4.p.1"><p>New Proxy Status Types can be defined by registering them in the HTTP Proxy Status Types registry.</p></div><div id="rfc.section.4.p.2"><p>Registration requests are reviewed and approved by a Designated Expert, as per <a href="#RFC8126"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>, Section 4.5. A specification document is appreciated, but not required.</p></div><div id="rfc.section.4.p.3" class="avoidbreakafter"><p>The Expert(s) should consider the following factors when evaluating requests:</p></div><div id="rfc.section.4.p.4"><ul><li>Community feedback</li><li>If the value is sufficiently well-defined</li><li>If the value is generic; vendor-specific, application-specific and deployment-specific values are discouraged</li></ul></div><div id="rfc.section.4.p.5" class="avoidbreakafter"><p>Registration requests should use the following template:</p></div><div id="rfc.section.4.p.6"><ul><li>Name: [a name for the Proxy Status Type that is allowable as a sh-param-list key]</li><li>Description: [a description of the conditions that generate the Proxy Status Types]</li><li>Extra Parameters: [zero or more optional parameters, typed using one of the types available in sh-item]</li><li>Recommended HTTP status code: [the appropriate HTTP status code for this entry]</li></ul></div><div id="rfc.section.4.p.7"><p>See the registry at <a href="https://iana.org/assignments/http-proxy-statuses">https://iana.org/assignments/http-proxy-statuses</a> for details on where to send registration requests.</p></div></section><hr class="noprint"><section id="iana-considerations"><h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a> <a href="#iana-considerations">IANA Considerations</a></h2><div id="rfc.section.5.p.1"><p>Upon publication, please create the HTTP Proxy Status Types registry at <a href="https://iana.org/assignments/http-proxy-statuses">https://iana.org/assignments/http-proxy-statuses</a> and populate it with the types defined in <a href="#types" title="Proxy Status Types">Section 3</a>; see <a href="#register" title="Defining New Proxy Status Types">Section 4</a> for its associated procedures.</p></div></section><hr class="noprint"><section id="security"><h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a> <a href="#security">Security Considerations</a></h2><div id="rfc.section.6.p.1"><p>One of the primary security concerns when using Proxy-Status is leaking information that might aid an attacker.</p></div><div id="rfc.section.6.p.2"><p>As a result, care needs to be taken when deciding to generate a Proxy-Status header. Note that intermediaries are not required to generate a Proxy-Status header field in any response, and can conditionally generate them based upon request attributes (e.g., authentication tokens, IP address).</p></div><div id="rfc.section.6.p.3"><p>Likewise, generation of all parameters is optional.</p></div><div id="rfc.section.6.p.4"><p>Special care needs to be taken in generating proxy and origin parameters, as they can expose information about the intermediary’s configuration and back-end topology.</p></div></section><hr class="noprint"><section id="rfc.references" class="np"><h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a> References</h2><section class="np"><div id="rfc.references.1"><h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a> Normative References</h3><dl class="reference"><dt id="I-D.ietf-httpbis-header-structure">[I-D.ietf-httpbis-header-structure]</dt><dd>Nottingham, M. and P. Kamp, “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-header-structure-13">Structured Headers for HTTP</a>”, Internet-Draft draft-ietf-httpbis-header-structure-13 (<a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-header-structure">work in progress</a>), August 2019.</dd><dt id="RFC2119">[RFC2119]</dt><dd>Bradner, S., “<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP 14, RFC 2119, <a href="http://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.</dd><dt id="RFC7301">[RFC7301]</dt><dd>Friedl, S., Popov, A., Langley, A., and E. Stephan, “<a href="https://tools.ietf.org/html/rfc7301">Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, <a href="http://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>, July 2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;.</dd><dt id="RFC8126">[RFC8126]</dt><dd>Cotton, M., Leiba, B., and T. Narten, “<a href="https://tools.ietf.org/html/rfc8126">Guidelines for Writing an IANA Considerations Section in RFCs</a>”, BCP 26, RFC 8126, <a href="http://dx.doi.org/10.17487/RFC8126">DOI 10.17487/RFC8126</a>, June 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;.</dd><dt id="RFC8174">[RFC8174]</dt><dd>Leiba, B., “<a href="https://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>”, BCP 14, RFC 8174, <a href="http://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.</dd><dt id="RFC8499">[RFC8499]</dt><dd>Hoffman, P., Sullivan, A., and K. Fujiwara, “<a href="https://tools.ietf.org/html/rfc8499">DNS Terminology</a>”, BCP 219, RFC 8499, <a href="http://dx.doi.org/10.17487/RFC8499">DOI 10.17487/RFC8499</a>, January 2019, &lt;<a href="https://www.rfc-editor.org/info/rfc8499">https://www.rfc-editor.org/info/rfc8499</a>&gt;.</dd></dl></div></section><section><div id="rfc.references.2"><h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a> Informative References</h3><dl class="reference"><dt id="RFC8586">[RFC8586]</dt><dd>Ludin, S., Nottingham, M., and N. Sullivan, “<a href="https://tools.ietf.org/html/rfc8586">Loop Detection in Content Delivery Networks (CDNs)</a>”, RFC 8586, <a href="http://dx.doi.org/10.17487/RFC8586">DOI 10.17487/RFC8586</a>, April 2019, &lt;<a href="https://www.rfc-editor.org/info/rfc8586">https://www.rfc-editor.org/info/rfc8586</a>&gt;.</dd></dl></div></section></section><hr class="noprint"><section id="rfc.authors" class="np"><h2><a href="#rfc.authors">Authors' Addresses</a></h2><address><b>Mark Nottingham</b><br>Fastly<br>EMail: <a href="mailto:mnot@mnot.net">mnot@mnot.net</a><br>URI: <a href="https://www.mnot.net/">https://www.mnot.net/</a></address><address><b>Piotr Sikora</b><br>Google<br>EMail: <a href="mailto:piotrsikora@google.com">piotrsikora@google.com</a></address></section></body></html>

